<!-- Styles and HTML brought over from Assignment 1 -->
<html>
  <header>
    <meta charset="utf-8" />
    <title>Home Page</title>
    <meta name="description" content="" />
    <meta name="author" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link
      href="//fonts.googleapis.com/css?family=Raleway:400,300,600"
      rel="stylesheet"
      type="text/css"
    />

    <link rel="stylesheet" href="css/normalize.css" />
    <link rel="stylesheet" href="css/skeleton.css" />

    <link rel="icon" type="image/png" href="images/favicon.png" />
  </header>

  <body class="container">
    <!-- Include external JS files and funtions-->
    <script src="./files/database.js"></script>
    <script src="./files/functions.js"></script>
    <script src="./files/playlist.js"></script>
    <script src="./files/search.js"></script>
    <script src="./files/song.js"></script>

    <script>
      //disable input for the page until a radio box is selected
      document.addEventListener("DOMContentLoaded", function () {
        disableInput();

        //prevent submit button from refreshing the page and messing up the table
        const buttonBehavior = document.querySelector("#searchForm");
        buttonBehavior.addEventListener("submit", function (e) {
          e.preventDefault();
        });
      });

      //bring music data over from API into storage and prepare it for website usage
      let table;
      let musicTable = initializeMusicTable(table);

      //initializes the musicTable if its missing and only allows it to be initialized once
      function initializeMusicTable(existingTable) {
        if (!existingTable) {
          return getMusicData();
        }
        return existingTable;
      }
      //reset the musicTable once reset button has been used
      function resetMusicTable(reset) {
        if (reset === true) {
          musicTable = getMusicData();
          //clear any previois messages in DIV .eight
          document.querySelector("#statusMessage").textContent = "";
          //make the table visible from any previous searches
          document.querySelector("#statusMessage").style.display ="none";
          document.querySelector("#tableHead").style.display = "";
        }
      }
    </script>

    <header class="row">
      <h2 align="center">COMP3512 Kirill Penkov</h2>
      <a class="button" href="https://github.com/kpenkov98/f2023-assign2.git"
        >GitHub Repo</a
      >
      <br />
      <a class="button" href="https://kpenkov98.github.io/f2023-assign2/"
        >GitHub Pages</a
      >
    </header>

    <!-- Nav Bar with View Selection -->
    <nav class="navbar row">
      <ul class="navbar-list">
        <li class="navbar-item">
          <a class="navbar-link" onclick="changeViews('search')" href="#"
            >Search & Browse</a
          >
        </li>
        <li class="navbar-item">
          <a class="navbar-link" onclick="changeViews('song')" href="#"
            >Song Details</a
          >
        </li>
        <li class="navbar-item">
          <a class="navbar-link" onclick="changeViews('playlist')" href="#"
            >Playlist</a
          >
        </li>
      </ul>
    </nav>

    <!-- View Search/Browse -->
    <div id="search" class="view active-view">
      <h1>Search & Browse Music</h1>
      <h2>List of Songs</h2>

      <div class="row">
        <div class="four columns">
          <form id="searchForm">
            <div id="titleSearch">
              <label for="title">Title</label>
              <input
                type="radio"
                name="searchRadio"
                onclick="blurOptions('titleSearch');"
                id="titleRadio"
              />
              <input
                type="text"
                id="titleText"
                name="title"
                placeholder="Enter title"
                value=""
              />
            </div>

            <!-- Artist prepopulation into options -->
            <div id="artistSearch">
              <label for="artist">Artist</label>
              <input
                type="radio"
                name="searchRadio"
                onclick="blurOptions('artistSearch');"
                id="artistRadio"
              />
              <select id="artistName" name="artist">
                <option value="">Select an Artist</option>
              </select>
            </div>

            <!-- Genre prepopulation into options -->
            <div id="genreSearch">
              <label for="genre">Genre</label>
              <input
                type="radio"
                name="searchRadio"
                onclick="blurOptions('genreSearch');"
                id="genreRadio"
              />
              <select id="genreName" name="genre">
                <option value="">Select an Artist</option>
              </select>
            </div>
            <!--Buttons Submit and Reset for Form Reset-->
            <div>
              <input
                class="button button-primary"
                type="submit"
                value="Search"
                id="searchBox"
                onclick="search(musicTable)"
              />
              <input
                class="button"
                type="reset"
                name="Clear"
                id="clearSearch"
                onclick="resetMusicTable(true)"
              />
            </div>
          </form>
        </div>
        <!--Song Table-->
        <div class="eight columns scroll">
          <h3 id="statusMessage"></h3>
          <table id="tableHead">
            <thead>
              <tr>
                <th style="display: none">Song ID</th>
                <th>Title</th>
                <th>Artist</th>
                <th>Year</th>
                <th>Genre</th>
                <th>Popularity</th>
                <th>Add To Playlist</th>
              </tr>
            </thead>
            <tbody id="songTable"></tbody>
          </table>
        </div>
      </div>
    </div>
    <script>
      populateSelect(musicTable);
      displaySongs(musicTable);
    </script>

    <!-- View Song Details -->
    <div id="song" class="view row">
      <h1>Song Details</h1>
      <ul></ul>
    </div>

    <!-- View Playlist-->
    <div id="playlist" class="view row">
      <h1>Playlist</h1>
    </div>

    <footer>
      <h5>COMP3512 Assignment 2</h5>
      <h5>&copy Kirill Penkov</h5>
      <a
        class="button button-primary"
        href="https://github.com/kpenkov98/f2023-assign2.git"
        type="button"
        target="_blank"
        ><h5>Github Repo</h5></a
      >
    </footer>
  </body>
</html>
